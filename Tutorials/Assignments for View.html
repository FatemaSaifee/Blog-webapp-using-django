<!DOCTYPE html>
<html lang="en"><head>
    <title>Assignments for View</title>

<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<link href="Assignments%20for%20View_files/style.css" media="all" type="text/css" rel="stylesheet">

<style type="text/css">#yddContainer{display:block;font-family:Microsoft YaHei;position:relative;width:100%;height:100%;top:-4px;left:-4px;font-size:12px;border:1px solid}#yddTop{display:block;height:22px}#yddTopBorderlr{display:block;position:static;height:17px;padding:2px 28px;line-height:17px;font-size:12px;color:#5079bb;font-weight:bold;border-style:none solid;border-width:1px}#yddTopBorderlr .ydd-sp{position:absolute;top:2px;height:0;overflow:hidden}.ydd-icon{left:5px;width:17px;padding:0px 0px 0px 0px;padding-top:17px;background-position:-16px -44px}.ydd-close{right:5px;width:16px;padding-top:16px;background-position:left -44px}#yddKeyTitle{float:left;text-decoration:none}#yddMiddle{display:block;margin-bottom:10px}.ydd-tabs{display:block;margin:5px 0;padding:0 5px;height:18px;border-bottom:1px solid}.ydd-tab{display:block;float:left;height:18px;margin:0 5px -1px 0;padding:0 4px;line-height:18px;border:1px solid;border-bottom:none}.ydd-trans-container{display:block;line-height:160%}.ydd-trans-container a{text-decoration:none;}#yddBottom{position:absolute;bottom:0;left:0;width:100%;height:22px;line-height:22px;overflow:hidden;background-position:left -22px}.ydd-padding010{padding:0 10px}#yddWrapper{color:#252525;z-index:10001;background:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ab20.png);}#yddContainer{background:#fff;border-color:#4b7598}#yddTopBorderlr{border-color:#f0f8fc}#yddWrapper .ydd-sp{background-image:url(chrome-extension://eopjamdnofihpioajgfdikhhbobonhbb/ydd-sprite.png)}#yddWrapper a,#yddWrapper a:hover,#yddWrapper a:visited{color:#50799b}#yddWrapper .ydd-tabs{color:#959595}.ydd-tabs,.ydd-tab{background:#fff;border-color:#d5e7f3}#yddBottom{color:#363636}#yddWrapper{min-width:250px;max-width:400px;}</style>

  <script src="Assignments%20for%20View_files/a.js" async="" type="text/javascript"></script><script src="Assignments%20for%20View_files/analytics.js" async=""></script><script src="Assignments%20for%20View_files/embed.js" async="" type="text/javascript"></script></head>
  <body>
    <header>
<section class="logo">
<h1><a href="http://webcoursify.github.io/">WebDev Course</a></h1>
<h2 class="subheader">by Tyrone Cheung</h2>
</section>
<nav id="nav">
<ul>
  
    <li><a href="http://webcoursify.github.io/about">ReadMe</a></li>
  
    <li><a href="http://webdemo.zhangty.me/">Project Demo</a></li>
  
    <li><a href="http://webcoursify.github.io/project_code">Download Project</a></li>
  
    <li><a href="http://eepurl.com/_YOyb">Subscribe update</a></li>
  
    <li><a href="mailto:firstprayer.zhang@gmail.com">Contact</a></li>
  
</ul>
</nav>

</header>
    <div class="container">
		<div class="content">
			    <article>
      <h1>Assignments for View</h1>
      <h5>Last modified: 12-29-2014</h5>

        <p>We’ll be implementing the front end of the website for the 
assignments in this chapter. Since auto testing gets a little tricky and
 limited when it comes to the front end, so our test scripts don’t cover
 all the specifications.</p>

<ol>
  <li>
    <p>Finish the implementation of homepage (<code>app.controllers.webpages.all_articles</code> and <code>templates/index.html</code>). The implementation should support similar functionality as the article search controller you implemented before.</p>

    <p>The full specification is:</p>

    <ul>
      <li>
        <p>Support searching. User can input the search query to the 
textbox in the right sidebar, and click the search button to search 
articles with title containing the search query</p>
      </li>
      <li>
        <p>Support paging. It looks like this:</p>

        <p><img src="Assignments%20for%20View_files/pager.png" style="width:75%"></p>

        <p>When user clicks on the pager, it jumps to the corresponding page, with query and article count per page <strong>preserved</strong>. </p>
      </li>
    </ul>

    <p>Use <code>make 4_view_articles</code> to test.</p>

    <p><strong>Hints</strong></p>

    <ul>
      <li>
        <p>You’ve actually implemented the searching and paging at the 
backend before, so you should try to reuse the code you wrote. One 
possible way to do this is encapsulate the code you wrote in the <em>Model</em> layer as a function, and call the function from different controllers</p>
      </li>
      <li>
        <p>When implementing the paging, you should consider putting 
this part in a separate .html file and use {% include %} to include it, 
so you can re-use this part of code in other places. Since you need to 
preserve the previous query and article count per page, you might need 
to use javascript to substitute the <code>page=...</code> parameter in the url to the one user clicks on. Specifically, you can construct a new url, and redirect the page to that url</p>
      </li>
    </ul>
  </li>
  <li>
    <p>Add edit article page. Specifically, you need to:</p>

    <ul>
      <li>
        <p>Implement a new controller (<code>app.controllers.webpages.edit_article</code>), corresponding to the url pattern <code>/edit_article?id=[article_id]</code>.
 This controller returns the html page for user to edit the article with
 given id. Only the author of the article has access to the page. 404 
should be returned for unauthorized visit</p>
      </li>
      <li>
        <p>For the html page, you can either create a new .html 
template, or, which we recommend, try to re-use the template of 
create_article.html</p>

        <p><strong>Hint</strong>: Re-using an existed template is good 
because any future modification will be reflected on both page, 
otherwise you’ll need to make the same changes twice. You should start 
by thinking what parts are different between these two pages and what 
parts can remain the same. </p>

        <p>For example, the <code>action</code> attribute of the form is
 different. You can use {% if … %} for rendering different contents in 
the same template; and you can use <code>&lt;input value="..."&gt;</code> to assign initial values for inputs, etc.</p>

        <p>As you might notice we use the <em>AJAX FORM</em> technique mentioned before here. You probably won’t need to change this part, but you may want to see how it works</p>
      </li>
      <li>
        <p>Implement the rich editor. You can follow the instructions above, or find other implementations of open source rich text editor</p>
      </li>
      <li>
        <p>You have already implemented the controller for updating an article in the previous assignment (<code>app.controllers.api.update_article</code>). You just need to make sure that form in the edit article page submits to this controller</p>
      </li>
    </ul>

    <p>Use <code>make 4_view_edit_article</code> to test.</p>
  </li>
  <li>
    <p><em>Buttons</em></p>

    <p>As you might see there’re some buttons in the article page now:</p>

    <p><img src="Assignments%20for%20View_files/article_buttons.png" style="width:80%"></p>

    <p>Right now they’re static and have no behaviors. Now what we’re expecting is:</p>

    <ul>
      <li>
        <p>Only author of the article can see this three buttons. When 
the user is not log on or the log on user is not the author, you should 
not render these buttons. Use Django’s {% if … %}</p>
      </li>
      <li>
        <p>When user click on the <em>edit</em> button, he will be redirect to the edit article page</p>
      </li>
      <li>
        <p>When the user click on the <em>delete</em> button, there 
should be an alert window saying “are you sure?” or similar stuffs and 
wait for the user’s confirmation. If he confirms, delete the article, 
and redirect to his homepage after the deletion is complete. Use 
javascript to listen to the click event of this button</p>
      </li>
      <li>
        <p>For the publish/unpublish button, the text inside it clearly 
doesn’t make any sense. When the article is a draft, the text should be 
“publish”; if the article is a published public article, the text should
 be “unpublish”. When user click on the button, it should cause the 
state of the article to change from one to the other; when the update 
completes, the text on the button should also change. As the previous 
one, use Javascript for this</p>
      </li>
    </ul>

    <p>Use <code>make 4_view_article_page</code> to test.</p>

    <p><strong>Hints</strong></p>

    <p>We can tell you two ways about passing data into javascript. </p>

    <ul>
      <li>
        <p>Directly render the data as variables in javascript. This is the brute-force way, not a very good solution</p>
      </li>
      <li>
        <p>Render the data into html, or attributes inside html 
elements. For example, you can render the id of the article into an html
 element like:</p>

        <pre><code>&lt;div id="article-data" 
     data-article-id="{{ article.id }}"&gt;
&lt;/div&gt;
</code></pre>

        <p>and read the information in javascript with:</p>

        <pre><code>var articleId = $('#article-data').data('article-id');
</code></pre>
      </li>
    </ul>

    <p><strong>Note</strong> In our testing script we search for these buttons by class names. That is, the edit button has class <code>btn-edit-article</code>, the delete button has class <code>btn-delete-article</code>, the publish/unpublish button has class <code>btn-change-article-state</code>. We don’t expect this to change otherwise it will become very tricky for the test script to work properly. </p>
  </li>
</ol>



    </article>



<div id="disqus_thread"><iframe verticalscrolling="no" horizontalscrolling="no" src="Assignments%20for%20View_files/a.html" style="width: 100% ! important; border: medium none ! important; overflow: hidden ! important; height: 614px ! important;" title="Disqus" tabindex="0" scrolling="no" allowtransparency="true" data-disqus-uid="2" id="dsq-2" frameborder="0" width="100%"></iframe></div>
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'webcoursify'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    
		</div>
	</div>
	<aside class="sidebar">
	<section class="module">
	<h2 style="margin-left: 24px;">FullStack Web Development</h2>
	<ul class="lesson-list chapter-list">
		
		<li data-url="/content/0-Preface.html">
			<a href="http://webcoursify.github.io/content/0-Preface.html">
				<span class="lesson-title">1 - Preface</span>
			</a>
			
		</li>
		
		<li data-url="/content/1-DjangoBasic">
			<a href="http://webcoursify.github.io/content/1-DjangoBasic">
				<span class="lesson-title">2 - Django Basic</span>
			</a>
			
			<ul class="section-list">
				
				<li data-url="/content/1-DjangoBasic/1-ClientServer.html"><a href="http://webcoursify.github.io/content/1-DjangoBasic/1-ClientServer.html">1 - Client-Server Model and MVC Design Pattern</a></li>
				
				<li data-url="/content/1-DjangoBasic/2-DjangoMVC.html"><a href="http://webcoursify.github.io/content/1-DjangoBasic/2-DjangoMVC.html">2 - Django's MVC</a></li>
				
				<li data-url="/content/1-DjangoBasic/3-Assignment.html"><a href="http://webcoursify.github.io/content/1-DjangoBasic/3-Assignment.html">3 - Assignment-Django Basic</a></li>
				
			</ul>
			
		</li>
		
		<li data-url="/content/2-MVC-Controller">
			<a href="http://webcoursify.github.io/content/2-MVC-Controller">
				<span class="lesson-title">3 - Intro to Django's Controller</span>
			</a>
			
			<ul class="section-list">
				
				<li data-url="/content/2-MVC-Controller/1-DjangoReqRes.html"><a href="http://webcoursify.github.io/content/2-MVC-Controller/1-DjangoReqRes.html">1 - Django's HttpRequest, HttpResponse, and Url dispatching</a></li>
				
				<li data-url="/content/2-MVC-Controller/2-Assignment.html"><a href="http://webcoursify.github.io/content/2-MVC-Controller/2-Assignment.html">2 - Assignment for Implementing Controller</a></li>
				
			</ul>
			
		</li>
		
		<li data-url="/content/3-MVC-Model">
			<a href="http://webcoursify.github.io/content/3-MVC-Model">
				<span class="lesson-title">4 - Model Layer in Django</span>
			</a>
			
			<ul class="section-list">
				
				<li data-url="/content/3-MVC-Model/1-DjangoModel.html"><a href="http://webcoursify.github.io/content/3-MVC-Model/1-DjangoModel.html">1 - Using Model in Django</a></li>
				
				<li data-url="/content/3-MVC-Model/2-FurtherDiscussion.html"><a href="http://webcoursify.github.io/content/3-MVC-Model/2-FurtherDiscussion.html">2 - Further discussion with regard to Model</a></li>
				
				<li data-url="/content/3-MVC-Model/3-Assignment.html"><a href="http://webcoursify.github.io/content/3-MVC-Model/3-Assignment.html">3 - Assignments for Model</a></li>
				
			</ul>
			
		</li>
		
		<li class="active" data-url="/content/4-MVC-View">
			<a href="http://webcoursify.github.io/content/4-MVC-View">
				<span class="lesson-title">5 - The View-User Interaction</span>
			</a>
			
			<ul class="section-list">
				
				<li data-url="/content/4-MVC-View/2-DjangoTemplate.html"><a href="http://webcoursify.github.io/content/4-MVC-View/2-DjangoTemplate.html">1 - Template in Django</a></li>
				
				<li data-url="/content/4-MVC-View/3-FormAjax.html"><a href="http://webcoursify.github.io/content/4-MVC-View/3-FormAjax.html">2 - Form, Ajax</a></li>
				
				<li data-url="/content/4-MVC-View/4-RichEditor.html"><a href="http://webcoursify.github.io/content/4-MVC-View/4-RichEditor.html">3 - Using Rich Text Editor with Ajax</a></li>
				
				<li class="active" data-url="/content/4-MVC-View/5-Assignment.html"><a href="http://webcoursify.github.io/content/4-MVC-View/5-Assignment.html">4 - Assignments for View</a></li>
				
			</ul>
			
		</li>
		
		<li data-url="/content/5-Topic-User.html">
			<a href="http://webcoursify.github.io/content/5-Topic-User.html">
				<span class="lesson-title">6 - User Management in WebApp</span>
			</a>
			
		</li>
		
		<li data-url="/content/6-ProjectSpecification.html">
			<a href="http://webcoursify.github.io/content/6-ProjectSpecification.html">
				<span class="lesson-title">7 - Capstone Project Specification</span>
			</a>
			
		</li>
		
		<li data-url="/content/99-ExtraMaterials">
			<a href="http://webcoursify.github.io/content/99-ExtraMaterials">
				<span class="lesson-title">8 - Extra Tutorials</span>
			</a>
			
			<ul class="section-list">
				
				<li data-url="/content/99-ExtraMaterials/1-IntroToGit.html"><a href="http://webcoursify.github.io/content/99-ExtraMaterials/1-IntroToGit.html">1 - Introduction to Git</a></li>
				
				<li data-url="/content/99-ExtraMaterials/2-Deployment.html"><a href="http://webcoursify.github.io/content/99-ExtraMaterials/2-Deployment.html">2 - Deployment</a></li>
				
			</ul>
			
		</li>
		
	</ul>
	</section>

	<footer>
	Copyright 2015 Tyrone Cheung
	</footer>

	<footer>
		<p>
        <b>This course has been finished just recently, and there're a 
lot of improvements pending. If you like it, or think it's useful, or 
start to go through the course content, please <a href="mailto:zhangty10@gmail.com">shoot me an email</a> to let me know. Thanks!</b>
      </p>
	</footer>
</aside>
    <!-- Bootstrap core JavaScript-->
<!-- <script src="/js/jquery-1.10.2.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/hc.js"></script> -->
<script type="text/javascript" src="Assignments%20for%20View_files/jquery-2.js"></script>
<script type="text/javascript" async="" src="Assignments%20for%20View_files/saved_resource.js"></script>
<script type="text/javascript" async="" src="Assignments%20for%20View_files/inpage_linkid.js" id="undefined"></script>
<script type="text/javascript" async="" src="Assignments%20for%20View_files/library.js"></script>

<script type="text/javascript">
/* <![CDATA[ */
(function(){try{var s,a,i,j,r,c,l=document.getElementsByTagName("a"),t=document.createElement("textarea");for(i=0;l.length-i;i++){try{a=l[i].getAttribute("href");if(a&&a.indexOf("/cdn-cgi/l/email-protection") > -1  && (a.length > 28)){s='';j=27+ 1 + a.indexOf("/cdn-cgi/l/email-protection");if (a.length > j) {r=parseInt(a.substr(j,2),16);for(j+=2;a.length>j&&a.substr(j,1)!='X';j+=2){c=parseInt(a.substr(j,2),16)^r;s+=String.fromCharCode(c);}j+=1;s+=a.substr(j,a.length-j);}t.innerHTML=s.replace(/</g,"&lt;").replace(/>/g,"&gt;");l[i].setAttribute("href","mailto:"+t.value);}}catch(e){}}}catch(e){}})();
/* ]]> */
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-57962734-1', 'auto');
  ga('send', 'pageview');

</script>

<script type="text/javascript">
	var getLocation = function(href) {
	    var l = document.createElement("a");
	    l.href = href;
	    return l;
	};

	var pathname = getLocation(window.location.href).pathname;
	if(pathname[pathname.length - 1] == '/')
		pathname = pathname.substring(0, pathname.length - 1);

	function setActive(){
		var $this = $(this);
		if($this.data('url') && pathname.indexOf($this.data('url')) == 0){
			$(this).addClass('active');
		}
	}
	$('ul.chapter-list li')
		.each(setActive);
	$('ul.section-list li')
		.each(setActive);
</script>
  

</body></html>